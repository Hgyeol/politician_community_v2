{"version":3,"file":"profile-GvBrgzP_.js","sources":["../../../../../../../pages/profile.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n    <div class=\"mb-8\">\n      <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">마이페이지</h1>\n      <p class=\"text-gray-600\">내가 작성한 건의사항과 댓글을 확인하세요</p>\n    </div>\n\n    <!-- 사용자 정보 -->\n    <div v-if=\"user\" class=\"bg-white border border-gray-200 rounded-lg p-6 mb-8\">\n      <div class=\"flex items-center space-x-4\">\n        <div class=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center\">\n          <span class=\"text-2xl font-bold text-gray-800\">\n            {{ user.email?.charAt(0).toUpperCase() }}\n          </span>\n        </div>\n        <div>\n          <h2 class=\"text-xl font-semibold text-gray-900\">{{ user.email }}</h2>\n          <p class=\"text-gray-600\">가입일: {{ formatDate(user.created_at) }}</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- 탭 -->\n    <div class=\"border-b border-gray-200 mb-6\">\n      <nav class=\"flex space-x-8\">\n        <button\n          @click=\"activeTab = 'suggestions'\"\n          :class=\"[\n            'pb-4 px-1 border-b-2 font-medium text-sm transition-colors',\n            activeTab === 'suggestions'\n              ? 'border-gray-800 text-gray-800'\n              : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n          ]\"\n        >\n          내 건의사항 ({{ mySuggestions.length }})\n        </button>\n        <button\n          @click=\"activeTab = 'comments'\"\n          :class=\"[\n            'pb-4 px-1 border-b-2 font-medium text-sm transition-colors',\n            activeTab === 'comments'\n              ? 'border-gray-800 text-gray-800'\n              : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n          ]\"\n        >\n          내 댓글 ({{ myComments.length }})\n        </button>\n      </nav>\n    </div>\n\n    <!-- 로딩 -->\n    <div v-if=\"loading\" class=\"text-center py-16\">\n      <div class=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-800\"></div>\n    </div>\n\n    <!-- 내 건의사항 -->\n    <div v-else-if=\"activeTab === 'suggestions'\">\n      <div class=\"space-y-4\">\n        <div\n          v-for=\"suggestion in mySuggestions\"\n          :key=\"suggestion.id\"\n          class=\"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer\"\n          @click=\"router.push(`/suggestions/${suggestion.id}`)\"\n        >\n          <div class=\"flex justify-between items-start mb-3\">\n            <h2 class=\"text-xl font-semibold text-gray-900 flex-1\">\n              {{ suggestion.title }}\n            </h2>\n            <span class=\"ml-4 px-3 py-1 bg-gray-50 text-gray-700 rounded-full text-sm font-medium\">\n              {{ suggestion.category }}\n            </span>\n          </div>\n\n          <p class=\"text-gray-600 mb-4 line-clamp-2\">\n            {{ suggestion.content }}\n          </p>\n\n          <div class=\"flex items-center justify-between text-sm text-gray-500\">\n            <div class=\"flex items-center space-x-4\">\n              <span class=\"font-medium text-gray-800\">{{ suggestion.politicians?.name }}</span>\n              <span>({{ suggestion.politicians?.region }})</span>\n            </div>\n            <div class=\"flex items-center space-x-4\">\n              <span>조회 {{ suggestion.view_count || 0 }}</span>\n              <span>{{ formatDate(suggestion.created_at) }}</span>\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"mySuggestions.length === 0\" class=\"text-center py-16\">\n          <p class=\"text-gray-500 text-lg mb-4\">작성한 건의사항이 없습니다</p>\n          <NuxtLink\n            to=\"/suggestions/new\"\n            class=\"inline-block px-6 py-3 bg-gray-800 text-white rounded-lg font-medium hover:bg-gray-900 transition-colors\"\n          >\n            건의사항 작성하기\n          </NuxtLink>\n        </div>\n      </div>\n    </div>\n\n    <!-- 내 댓글 -->\n    <div v-else-if=\"activeTab === 'comments'\">\n      <div class=\"space-y-4\">\n        <div\n          v-for=\"comment in myComments\"\n          :key=\"comment.id\"\n          class=\"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer\"\n          @click=\"router.push(`/suggestions/${comment.suggestion_id}`)\"\n        >\n          <div class=\"mb-3\">\n            <span class=\"text-sm text-gray-500\">\n              건의사항: <span class=\"font-medium text-gray-700\">{{ comment.suggestions?.title || '제목 없음' }}</span>\n            </span>\n          </div>\n\n          <p class=\"text-gray-800 mb-3\">{{ comment.content }}</p>\n\n          <div class=\"text-sm text-gray-500\">\n            {{ formatDate(comment.created_at) }}\n          </div>\n        </div>\n\n        <div v-if=\"myComments.length === 0\" class=\"text-center py-16\">\n          <p class=\"text-gray-500 text-lg\">작성한 댓글이 없습니다</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\n\ndefinePageMeta({\n  middleware: 'auth',\n  layout: 'default'\n})\n\nconst router = useRouter()\nconst supabase = useSupabaseClient()\nconst { user } = useAuth()\n\nconst activeTab = ref('suggestions')\nconst loading = ref(true)\nconst mySuggestions = ref([])\nconst myComments = ref([])\n\nonMounted(async () => {\n  await loadMyData()\n})\n\nasync function loadMyData() {\n  if (!user.value) return\n\n  loading.value = true\n\n  try {\n    // 내 건의사항 로드\n    const userId = user.value.id || user.value.sub\n\n    const { data: suggestions } = await supabase\n      .from('suggestions')\n      .select(`\n        *,\n        politicians:politician_id (id, name, region, party)\n      `)\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false })\n\n    mySuggestions.value = suggestions || []\n\n    // 내 댓글 로드\n    const { data: comments } = await supabase\n      .from('comments')\n      .select(`\n        *,\n        suggestions:suggestion_id (id, title)\n      `)\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false })\n\n    myComments.value = comments || []\n  } catch (error) {\n    console.error('Failed to load user data:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction formatDate(dateString: string) {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  return date.toLocaleDateString('ko-KR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  })\n}\n</script>\n\n<style scoped>\n.line-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate","_ssrRenderList","_push","_parent"],"mappings":";;;;;;;;;;;;;;;;;;;;AA2Ie,cAAA;AACE,sBAAA;AACjB,UAAM,EAAE,KAAA,IAAS,QAAA;AAEjB,UAAM,YAAY,IAAI,aAAa;AACnC,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,gBAAgB,IAAI,EAAE;AAC5B,UAAM,aAAa,IAAI,EAAE;AA4CzB,aAAS,WAAW,YAAoB;AACtC,UAAI,CAAC,WAAY,QAAO;AACxB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,aAAO,KAAK,mBAAmB,SAAS;AAAA,QACtC,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,MAAA,CACN;AAAA,IACH;;;AArMO,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,iDAA6C,MAAA,CAAA,CAAA,0MAAA;UAO3CC,MAAA,IAAA,GAAI;2TAIJC,eAAAD,MAAA,IAAA,EAAK,OAAO,UAAU,YAAA,CAAW,sGAIaC,eAAAD,MAAA,IAAA,EAAK,KAAK,sEAC5B,WAAWA,MAAA,IAAA,EAAK,UAAU,CAAA;;;;;;QAUqC,UAAA,UAAS;sCAO9FC,eAAA,cAAA,MAAc,MAAM;;QAIiE,UAAA,UAAS;oCAOhGA,eAAA,WAAA,MAAW,MAAM;UAMrB,QAAA,OAAO;;iBAKF,UAAA,UAAS,eAAA;;AAGEC,sBAAA,cAAA,QAAd,eAAU;0RAOVD,eAAA,WAAW,KAAK,gHAGhBA,eAAA,WAAW,QAAQ,4EAKrBA,eAAA,WAAW,OAAO,6NAKwB,WAAW,aAAa,IAAI,iDAC7D,WAAW,aAAa,MAAM,oGAG5BA,eAAA,WAAW,cAAU,CAAA,gDACxB,WAAW,WAAW,UAAU,CAAA;;;AAKpC,YAAA,cAAA,MAAc,WAAM,GAAA;;;YAG3B,IAAG;AAAA,YACH,OAAM;AAAA,UAAA;6BAFR,CAKW,GAAAE,QAAAC,UAAA,aAAA;;;;;kCAFV,aAED;AAAA,gBAAA;AAAA;;;;;;;;;iBAMU,UAAA,UAAS,YAAA;;AAGDF,sBAAA,WAAA,QAAX,YAAO;oTAOuC,QAAQ,aAAa,SAAK,OAAA,sEAI9CD,eAAA,QAAQ,OAAO,0EAG3C,WAAW,QAAQ,UAAU,CAAA;;;AAIzB,YAAA,WAAA,MAAW,WAAM,GAAA;;;;;;;;;;;;;;;;;;;;"}