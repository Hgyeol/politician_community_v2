import { u as useSupabaseClient } from "./useSupabaseClient-H06rCZGb.js";
import { f as useSupabaseUser, n as navigateTo } from "../server.mjs";
import { computed } from "vue";
function useAuth() {
  const supabase = useSupabaseClient();
  const user = useSupabaseUser();
  const signUp = async (email, password, nickname, region = "") => {
    try {
      console.log("ðŸ”§ useAuth.signUp() í˜¸ì¶œ:", { email, nickname, region });
      const { data, error } = await supabase.auth.signUp({
        email,
        password,
        options: {
          data: {
            nickname,
            region
          }
        }
      });
      console.log("ðŸ”§ Supabase signUp ê²°ê³¼:", { data, error });
      if (error) throw error;
      return { data, error: null };
    } catch (error) {
      console.error("âŒ Sign up error:", error);
      return { data: null, error: error.message };
    }
  };
  const signIn = async (email, password) => {
    try {
      console.log("ðŸ”§ useAuth.signIn() í˜¸ì¶œ:", { email });
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password
      });
      console.log("ðŸ”§ Supabase signInWithPassword ê²°ê³¼:", {
        user: data?.user?.email,
        session: !!data?.session,
        error
      });
      if (error) throw error;
      return { data, error: null };
    } catch (error) {
      console.error("âŒ Sign in error:", error);
      return { data: null, error: error.message };
    }
  };
  const signOut = async () => {
    try {
      const { error } = await supabase.auth.signOut();
      if (error) throw error;
      await navigateTo("/");
      return { error: null };
    } catch (error) {
      console.error("Sign out error:", error);
      return { error: error.message };
    }
  };
  const getProfile = async (userId) => {
    try {
      const { data, error } = await supabase.from("profiles").select("*").eq("id", userId).single();
      if (error) throw error;
      return { data, error: null };
    } catch (error) {
      console.error("Get profile error:", error);
      return { data: null, error: error.message };
    }
  };
  const updateProfile = async (userId, updates) => {
    try {
      const { data, error } = await supabase.from("profiles").update(updates).eq("id", userId).select().single();
      if (error) throw error;
      return { data, error: null };
    } catch (error) {
      console.error("Update profile error:", error);
      return { data: null, error: error.message };
    }
  };
  const isAuthenticated = computed(() => !!user.value);
  return {
    user,
    signUp,
    signIn,
    signOut,
    getProfile,
    updateProfile,
    isAuthenticated
  };
}
export {
  useAuth as u
};
//# sourceMappingURL=useAuth-D5BgWjNS.js.map
