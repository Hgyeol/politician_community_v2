{"version":3,"file":"index-ClPjbUo3.js","sources":["../../../../../../nuxt/dist/app/components/server-placeholder.js","../../../../../../nuxt/dist/app/components/client-only.js","../../../../../../../pages/index.vue"],"sourcesContent":["import { createElementBlock, defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"ServerPlaceholder\",\n  render() {\n    return createElementBlock(\"div\");\n  }\n});\n","import { cloneVNode, createElementBlock, defineComponent, getCurrentInstance, h, onMounted, provide, shallowRef } from \"vue\";\nimport { isPromise } from \"@vue/shared\";\nimport { useNuxtApp } from \"../nuxt.js\";\nimport ServerPlaceholder from \"./server-placeholder.js\";\nimport { elToStaticVNode } from \"./utils.js\";\nexport const clientOnlySymbol = Symbol.for(\"nuxt:client-only\");\nconst STATIC_DIV = \"<div></div>\";\nexport default defineComponent({\n  name: \"ClientOnly\",\n  inheritAttrs: false,\n  props: [\"fallback\", \"placeholder\", \"placeholderTag\", \"fallbackTag\"],\n  ...import.meta.dev && {\n    slots: Object\n  },\n  setup(props, { slots, attrs }) {\n    const mounted = shallowRef(false);\n    onMounted(() => {\n      mounted.value = true;\n    });\n    if (import.meta.dev) {\n      const nuxtApp = useNuxtApp();\n      nuxtApp._isNuxtPageUsed = true;\n      nuxtApp._isNuxtLayoutUsed = true;\n    }\n    const vm = getCurrentInstance();\n    if (vm) {\n      vm._nuxtClientOnly = true;\n    }\n    provide(clientOnlySymbol, true);\n    return () => {\n      if (mounted.value) {\n        const vnodes = slots.default?.();\n        if (vnodes && vnodes.length === 1) {\n          return [cloneVNode(vnodes[0], attrs)];\n        }\n        return vnodes;\n      }\n      const slot = slots.fallback || slots.placeholder;\n      if (slot) {\n        return h(slot);\n      }\n      const fallbackStr = props.fallback || props.placeholder || \"\";\n      const fallbackTag = props.fallbackTag || props.placeholderTag || \"span\";\n      return createElementBlock(fallbackTag, attrs, fallbackStr);\n    };\n  }\n});\nconst cache = /* @__PURE__ */ new WeakMap();\n// @__NO_SIDE_EFFECTS__\nexport function createClientOnly(component) {\n  if (import.meta.server) {\n    return ServerPlaceholder;\n  }\n  if (cache.has(component)) {\n    return cache.get(component);\n  }\n  const clone = { ...component };\n  if (clone.render) {\n    clone.render = (ctx, cache2, $props, $setup, $data, $options) => {\n      if ($setup.mounted$ ?? ctx.mounted$) {\n        const res = component.render?.bind(ctx)(ctx, cache2, $props, $setup, $data, $options);\n        return res.children === null || typeof res.children === \"string\" ? cloneVNode(res) : h(res);\n      }\n      return elToStaticVNode(ctx._.vnode.el, STATIC_DIV);\n    };\n  } else {\n    clone.template &&= `\n      <template v-if=\"mounted$\">${component.template}</template>\n      <template v-else>${STATIC_DIV}</template>\n    `;\n  }\n  clone.setup = (props, ctx) => {\n    const nuxtApp = useNuxtApp();\n    const mounted$ = shallowRef(nuxtApp.isHydrating === false);\n    const instance = getCurrentInstance();\n    if (nuxtApp.isHydrating) {\n      const attrs = { ...instance.attrs };\n      const directives = extractDirectives(instance);\n      for (const key in attrs) {\n        delete instance.attrs[key];\n      }\n      onMounted(() => {\n        Object.assign(instance.attrs, attrs);\n        instance.vnode.dirs = directives;\n      });\n    }\n    onMounted(() => {\n      mounted$.value = true;\n    });\n    const setupState = component.setup?.(props, ctx) || {};\n    if (isPromise(setupState)) {\n      return Promise.resolve(setupState).then((setupState2) => {\n        if (typeof setupState2 !== \"function\") {\n          setupState2 ||= {};\n          setupState2.mounted$ = mounted$;\n          return setupState2;\n        }\n        return (...args) => {\n          if (mounted$.value || !nuxtApp.isHydrating) {\n            const res = setupState2(...args);\n            return res.children === null || typeof res.children === \"string\" ? cloneVNode(res) : h(res);\n          }\n          return elToStaticVNode(instance?.vnode.el, STATIC_DIV);\n        };\n      });\n    } else {\n      if (typeof setupState === \"function\") {\n        return (...args) => {\n          if (mounted$.value) {\n            const res = setupState(...args);\n            const attrs = clone.inheritAttrs !== false ? ctx.attrs : void 0;\n            return res.children === null || typeof res.children === \"string\" ? cloneVNode(res, attrs) : h(res, attrs);\n          }\n          return elToStaticVNode(instance?.vnode.el, STATIC_DIV);\n        };\n      }\n      return Object.assign(setupState, { mounted$ });\n    }\n  };\n  cache.set(component, clone);\n  return clone;\n}\nfunction extractDirectives(instance) {\n  if (!instance || !instance.vnode.dirs) {\n    return null;\n  }\n  const directives = instance.vnode.dirs;\n  instance.vnode.dirs = null;\n  return directives;\n}\n","<template>\n  <ClientOnly>\n    <div class=\"fixed inset-0 flex flex-col\">\n      <!-- ÏÉÅÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->\n      <nav class=\"bg-white border-b border-gray-200 z-50 flex-shrink-0\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div class=\"flex justify-between items-center h-16\">\n            <NuxtLink to=\"/\" class=\"flex items-center space-x-2 group\">\n              <div class=\"text-2xl\">üèõÔ∏è</div>\n              <span class=\"text-xl font-bold text-gray-900\">\n                Ï†ïÏπòÏù∏ Ïª§ÎÆ§ÎãàÌã∞\n              </span>\n            </NuxtLink>\n\n            <div class=\"flex items-center space-x-4\">\n              <NuxtLink\n                v-if=\"!isAuthenticated\"\n                to=\"/auth/login\"\n                class=\"px-6 py-2 bg-gray-900 text-white font-semibold hover:bg-gray-800 transition-all\"\n              >\n                Î°úÍ∑∏Ïù∏\n              </NuxtLink>\n\n              <button\n                v-else\n                @click=\"handleSignOut\"\n                class=\"px-4 py-2 text-red-600 hover:bg-red-50 font-medium transition-all\"\n              >\n                Î°úÍ∑∏ÏïÑÏõÉ\n              </button>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <!-- ÏßÄÎèÑ ÏòÅÏó≠ -->\n      <div class=\"flex-1 overflow-hidden relative flex items-center justify-center bg-gray-50\">\n        <div v-html=\"htmlContent\" class=\"max-w-5xl\"></div>\n        <PoliticianModal\n          :show=\"showModal\"\n          :politician=\"selectedPolitician\"\n          @close=\"closeModal\"\n        />\n      </div>\n    </div>\n  </ClientOnly>\n</template>\n\n<script setup>\nimport { ref, onMounted, nextTick } from 'vue'\n\ndefinePageMeta({\n  layout: false\n})\n\nconst htmlContent = ref('')\nconst showModal = ref(false)\nconst selectedPolitician = ref(null)\n\nconst { politicians, loadPoliticians, findByRegion } = usePoliticians()\nconst { isAuthenticated, signOut } = useAuth()\n\nconst handleSignOut = async () => {\n  await signOut()\n}\n\nonMounted(async () => {\n  try {\n    // Load politician data first\n    await loadPoliticians()\n    console.log('‚úÖ Politicians loaded:', politicians.value.length)\n\n    // Set up global modal function for map_zoom.js to call\n    window.openPoliticianModal = (regionName) => {\n      console.log('üñ±Ô∏è openPoliticianModal called with:', regionName)\n      const politician = findByRegion(regionName)\n      console.log('üë§ Found politician:', politician)\n\n      if (politician) {\n        selectedPolitician.value = politician\n        showModal.value = true\n        console.log('‚úÖ Modal opened for:', politician.ÏùòÏõêÎ™Ö)\n      } else {\n        console.log('‚ùå No politician found for:', regionName)\n        console.log('üìã First 5 regions in CSV:', politicians.value.slice(0, 5).map(p => p.ÏßÄÏó≠))\n        alert(`\"${regionName}\" ÏßÄÏó≠Ïùò ÏùòÏõê Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`)\n      }\n    }\n\n    // Fetch the original HTML content\n    const response = await fetch('/original.html')\n    const html = await response.text()\n\n    // Extract body content\n    const bodyMatch = html.match(/<body[^>]*>([\\s\\S]*)<\\/body>/i)\n    if (bodyMatch) {\n      htmlContent.value = bodyMatch[1]\n    }\n\n    // Wait for DOM to update\n    await nextTick()\n\n    // Execute scripts\n    executeScripts()\n  } catch (error) {\n    console.error('Failed to load HTML:', error)\n  }\n})\n\nfunction executeScripts() {\n  // D3.js and other scripts are loaded via nuxt.config.ts\n  // The map_zoom.js script will automatically run when the DOM is ready\n  if (window.d3) {\n    // Trigger DOMContentLoaded event for scripts that listen to it\n    const event = new Event('DOMContentLoaded')\n    document.dispatchEvent(event)\n  }\n}\n\n\nfunction closeModal() {\n  showModal.value = false\n  selectedPolitician.value = null\n}\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AACe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,SAAS;AACP,WAAO,mBAAmB,KAAK;AAAA,EACjC;AACF,CAAC;ACDM,MAAM,mBAAmB,OAAO,IAAI,kBAAkB;AAE7D,MAAA,qBAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,cAAc;AAAA,EACd,OAAO,CAAC,YAAY,eAAe,kBAAkB,aAAa;AAAA,EAClE,GAAG;AAAA,EAGH,MAAM,OAAO,EAAE,OAAO,SAAS;AAC7B,UAAM,UAAU,WAAW,KAAK;AAShC,UAAM,KAAK,mBAAA;AACX,QAAI,IAAI;AACN,SAAG,kBAAkB;AAAA,IACvB;AACA,YAAQ,kBAAkB,IAAI;AAC9B,WAAO,MAAM;AACX,UAAI,QAAQ,OAAO;AACjB,cAAM,SAAS,MAAM,UAAA;AACrB,YAAI,UAAU,OAAO,WAAW,GAAG;AACjC,iBAAO,CAAC,WAAW,OAAO,CAAC,GAAG,KAAK,CAAC;AAAA,QACtC;AACA,eAAO;AAAA,MACT;AACA,YAAM,OAAO,MAAM,YAAY,MAAM;AACrC,UAAI,MAAM;AACR,eAAO,EAAE,IAAI;AAAA,MACf;AACA,YAAM,cAAc,MAAM,YAAY,MAAM,eAAe;AAC3D,YAAM,cAAc,MAAM,eAAe,MAAM,kBAAkB;AACjE,aAAO,mBAAmB,aAAa,OAAO,WAAW;AAAA,IAC3D;AAAA,EACF;AACF,CAAC;;;;;ACSmB,QAAI,EAAE;AACR,QAAI,KAAK;AACA,QAAI,IAAI;AAEoB,mBAAA;AAClB,YAAA;;;;;;;;;;;;;"}