import { defineComponent, ref, watch, mergeProps, unref, useSSRContext } from "vue";
import { ssrRenderAttrs, ssrIncludeBooleanAttr, ssrLooseContain, ssrLooseEqual, ssrRenderList, ssrRenderAttr, ssrInterpolate } from "vue/server-renderer";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/hookable/dist/index.mjs";
import { u as useRouter, b as useRoute } from "../server.mjs";
import { u as usePoliticians } from "./usePoliticians-DGzWK1_I.js";
import { u as useSuggestions } from "./useSuggestions-BK_q9rrp.js";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/ofetch/dist/node.mjs";
import "#internal/nuxt/paths";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/unctx/dist/index.mjs";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/h3/dist/index.mjs";
import "vue-router";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/radix3/dist/index.mjs";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/defu/dist/defu.mjs";
import "/Users/gimhangyeol/politican_community/politician_community_front/politician-map/node_modules/ufo/dist/index.mjs";
import "@supabase/ssr";
import "./useSupabaseClient-H06rCZGb.js";
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "new",
  __ssrInlineRender: true,
  setup(__props) {
    useRouter();
    const route = useRoute();
    const { politicians } = usePoliticians();
    useSuggestions();
    const form = ref({
      politician_id: "",
      category: "",
      title: "",
      content: ""
    });
    const submitting = ref(false);
    const error = ref("");
    function resetForm() {
      form.value = {
        politician_id: route.query.politician_id || "",
        // Re-apply from query if present
        category: "",
        title: "",
        content: ""
      };
      submitting.value = false;
      error.value = "";
    }
    watch(() => route.fullPath, (newPath) => {
      if (newPath === "/suggestions/new") {
        resetForm();
      }
    }, { immediate: true });
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8" }, _attrs))}><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-2">건의사항 작성</h1><p class="text-gray-600">정치인에게 전달할 건의사항을 작성해주세요</p></div><form class="bg-white border border-gray-200 p-8"><div class="mb-6"><label class="block text-sm font-semibold text-gray-700 mb-2"> 정치인 선택 * </label><select required class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${ssrIncludeBooleanAttr(Array.isArray(form.value.politician_id) ? ssrLooseContain(form.value.politician_id, "") : ssrLooseEqual(form.value.politician_id, "")) ? " selected" : ""}>정치인을 선택하세요</option><!--[-->`);
      ssrRenderList(unref(politicians), (politician) => {
        _push(`<option${ssrRenderAttr("value", politician.id)}${ssrIncludeBooleanAttr(Array.isArray(form.value.politician_id) ? ssrLooseContain(form.value.politician_id, politician.id) : ssrLooseEqual(form.value.politician_id, politician.id)) ? " selected" : ""}>${ssrInterpolate(politician.의원명)} (${ssrInterpolate(politician.지역)}, ${ssrInterpolate(politician.정당)}) </option>`);
      });
      _push(`<!--]--></select></div><div class="mb-6"><label class="block text-sm font-semibold text-gray-700 mb-2"> 카테고리 * </label><select required class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "") : ssrLooseEqual(form.value.category, "")) ? " selected" : ""}>카테고리를 선택하세요</option><option value="경제"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "경제") : ssrLooseEqual(form.value.category, "경제")) ? " selected" : ""}>경제</option><option value="교육"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "교육") : ssrLooseEqual(form.value.category, "교육")) ? " selected" : ""}>교육</option><option value="환경"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "환경") : ssrLooseEqual(form.value.category, "환경")) ? " selected" : ""}>환경</option><option value="복지"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "복지") : ssrLooseEqual(form.value.category, "복지")) ? " selected" : ""}>복지</option><option value="안전"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "안전") : ssrLooseEqual(form.value.category, "안전")) ? " selected" : ""}>안전</option><option value="교통"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "교통") : ssrLooseEqual(form.value.category, "교통")) ? " selected" : ""}>교통</option><option value="문화"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "문화") : ssrLooseEqual(form.value.category, "문화")) ? " selected" : ""}>문화</option><option value="기타"${ssrIncludeBooleanAttr(Array.isArray(form.value.category) ? ssrLooseContain(form.value.category, "기타") : ssrLooseEqual(form.value.category, "기타")) ? " selected" : ""}>기타</option></select></div><div class="mb-6"><label class="block text-sm font-semibold text-gray-700 mb-2"> 제목 * </label><input${ssrRenderAttr("value", form.value.title)} type="text" required maxlength="100" placeholder="건의사항 제목을 입력하세요" class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"><p class="mt-1 text-sm text-gray-500">${ssrInterpolate(form.value.title.length)}/100</p></div><div class="mb-6"><label class="block text-sm font-semibold text-gray-700 mb-2"> 내용 * </label><textarea required rows="10" maxlength="2000" placeholder="건의사항 내용을 상세히 작성해주세요" class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none">${ssrInterpolate(form.value.content)}</textarea><p class="mt-1 text-sm text-gray-500">${ssrInterpolate(form.value.content.length)}/2000</p></div>`);
      if (error.value) {
        _push(`<div class="mb-6 p-4 bg-red-50 border border-red-200"><p class="text-red-700">${ssrInterpolate(error.value)}</p></div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`<div class="flex gap-4"><button type="submit"${ssrIncludeBooleanAttr(submitting.value) ? " disabled" : ""} class="flex-1 px-6 py-3 bg-gray-800 text-white font-semibold hover:bg-gray-900 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">${ssrInterpolate(submitting.value ? "작성 중..." : "작성 완료")}</button><button type="button" class="px-6 py-3 bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 transition-colors"> 취소 </button></div></form></div>`);
    };
  }
});
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/suggestions/new.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
export {
  _sfc_main as default
};
//# sourceMappingURL=new-CbL8fww0.js.map
