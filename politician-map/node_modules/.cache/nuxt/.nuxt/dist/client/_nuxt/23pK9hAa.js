import{_ as $}from"./DA1Fcrqp.js";import{h as D,m as N,r as m,i as V,c as a,o as n,a as t,g as _,u as d,t as o,q as b,F as f,v as h,b as j,w as q,d as w,_ as B}from"./CmVufc-E.js";import{u as F}from"./DP_pfCD1.js";import{u as L}from"./DivXWrku.js";const S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},A={key:0,class:"bg-white border border-gray-200 rounded-lg p-6 mb-8"},I={class:"flex items-center space-x-4"},M={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center"},R={class:"text-2xl font-bold text-gray-800"},T={class:"text-xl font-semibold text-gray-900"},z={class:"text-gray-600"},E={class:"border-b border-gray-200 mb-6"},K={class:"flex space-x-8"},U={key:1,class:"text-center py-16"},G={key:2},H={class:"space-y-4"},J=["onClick"],O={class:"flex justify-between items-start mb-3"},P={class:"text-xl font-semibold text-gray-900 flex-1"},Q={class:"ml-4 px-3 py-1 bg-gray-50 text-gray-700 rounded-full text-sm font-medium"},W={class:"text-gray-600 mb-4 line-clamp-2"},X={class:"flex items-center justify-between text-sm text-gray-500"},Y={class:"flex items-center space-x-4"},Z={class:"font-medium text-gray-800"},tt={class:"flex items-center space-x-4"},et={key:0,class:"text-center py-16"},st={key:3},ot={class:"space-y-4"},at=["onClick"],nt={class:"mb-3"},rt={class:"text-sm text-gray-500"},it={class:"font-medium text-gray-700"},lt={class:"text-gray-800 mb-3"},dt={class:"text-sm text-gray-500"},ct={key:0,class:"text-center py-16"},ut=D({__name:"profile",setup(mt){const y=N(),v=F(),{user:i}=L(),l=m("suggestions"),g=m(!0),c=m([]),u=m([]);V(async()=>{await k()});async function k(){if(i.value){g.value=!0;try{const r=i.value.id||i.value.sub,{data:e}=await v.from("suggestions").select(`
        *,
        politicians:politician_id (id, name, region, party)
      `).eq("user_id",r).order("created_at",{ascending:!1});c.value=e||[];const{data:x}=await v.from("comments").select(`
        *,
        suggestions:suggestion_id (id, title)
      `).eq("user_id",r).order("created_at",{ascending:!1});u.value=x||[]}catch(r){console.error("Failed to load user data:",r)}finally{g.value=!1}}}function p(r){return r?new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):""}return(r,e)=>{const x=$;return n(),a("div",S,[e[7]||(e[7]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"마이페이지"),t("p",{class:"text-gray-600"},"내가 작성한 건의사항과 댓글을 확인하세요")],-1)),d(i)?(n(),a("div",A,[t("div",I,[t("div",M,[t("span",R,o(d(i).email?.charAt(0).toUpperCase()),1)]),t("div",null,[t("h2",T,o(d(i).email),1),t("p",z,"가입일: "+o(p(d(i).created_at)),1)])])])):_("",!0),t("div",E,[t("nav",K,[t("button",{onClick:e[0]||(e[0]=s=>l.value="suggestions"),class:b(["pb-4 px-1 border-b-2 font-medium text-sm transition-colors",l.value==="suggestions"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," 내 건의사항 ("+o(c.value.length)+") ",3),t("button",{onClick:e[1]||(e[1]=s=>l.value="comments"),class:b(["pb-4 px-1 border-b-2 font-medium text-sm transition-colors",l.value==="comments"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," 내 댓글 ("+o(u.value.length)+") ",3)])]),g.value?(n(),a("div",U,[...e[2]||(e[2]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-800"},null,-1)])])):l.value==="suggestions"?(n(),a("div",G,[t("div",H,[(n(!0),a(f,null,h(c.value,s=>(n(),a("div",{key:s.id,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:C=>d(y).push(`/suggestions/${s.id}`)},[t("div",O,[t("h2",P,o(s.title),1),t("span",Q,o(s.category),1)]),t("p",W,o(s.content),1),t("div",X,[t("div",Y,[t("span",Z,o(s.politicians?.name),1),t("span",null,"("+o(s.politicians?.region)+")",1)]),t("div",tt,[t("span",null,"조회 "+o(s.view_count||0),1),t("span",null,o(p(s.created_at)),1)])])],8,J))),128)),c.value.length===0?(n(),a("div",et,[e[4]||(e[4]=t("p",{class:"text-gray-500 text-lg mb-4"},"작성한 건의사항이 없습니다",-1)),j(x,{to:"/suggestions/new",class:"inline-block px-6 py-3 bg-gray-800 text-white rounded-lg font-medium hover:bg-gray-900 transition-colors"},{default:q(()=>[...e[3]||(e[3]=[w(" 건의사항 작성하기 ",-1)])]),_:1})])):_("",!0)])])):l.value==="comments"?(n(),a("div",st,[t("div",ot,[(n(!0),a(f,null,h(u.value,s=>(n(),a("div",{key:s.id,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:C=>d(y).push(`/suggestions/${s.suggestion_id}`)},[t("div",nt,[t("span",rt,[e[5]||(e[5]=w(" 건의사항: ",-1)),t("span",it,o(s.suggestions?.title||"제목 없음"),1)])]),t("p",lt,o(s.content),1),t("div",dt,o(p(s.created_at)),1)],8,at))),128)),u.value.length===0?(n(),a("div",ct,[...e[6]||(e[6]=[t("p",{class:"text-gray-500 text-lg"},"작성한 댓글이 없습니다",-1)])])):_("",!0)])])):_("",!0)])}}}),yt=B(ut,[["__scopeId","data-v-8c70e06b"]]);export{yt as default};
