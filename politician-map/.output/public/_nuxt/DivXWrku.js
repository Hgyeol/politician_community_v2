import{u as d}from"./DP_pfCD1.js";import{X as f,H as w,Z as m}from"./CmVufc-E.js";function U(){const t=d(),u=f(),i=async(e,o,r,s="")=>{try{console.log("ðŸ”§ useAuth.signUp() í˜¸ì¶œ:",{email:e,nickname:r,region:s});const{data:n,error:a}=await t.auth.signUp({email:e,password:o,options:{data:{nickname:r,region:s}}});if(console.log("ðŸ”§ Supabase signUp ê²°ê³¼:",{data:n,error:a}),a)throw a;return{data:n,error:null}}catch(n){return console.error("âŒ Sign up error:",n),{data:null,error:n.message}}},l=async(e,o)=>{try{console.log("ðŸ”§ useAuth.signIn() í˜¸ì¶œ:",{email:e});const{data:r,error:s}=await t.auth.signInWithPassword({email:e,password:o});if(console.log("ðŸ”§ Supabase signInWithPassword ê²°ê³¼:",{user:r?.user?.email,session:!!r?.session,error:s}),s)throw s;return{data:r,error:null}}catch(r){return console.error("âŒ Sign in error:",r),{data:null,error:r.message}}},c=async()=>{try{const{error:e}=await t.auth.signOut();if(e)throw e;return await m("/"),{error:null}}catch(e){return console.error("Sign out error:",e),{error:e.message}}},g=async e=>{try{const{data:o,error:r}=await t.from("profiles").select("*").eq("id",e).single();if(r)throw r;return{data:o,error:null}}catch(o){return console.error("Get profile error:",o),{data:null,error:o.message}}},p=async(e,o)=>{try{const{data:r,error:s}=await t.from("profiles").update(o).eq("id",e).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Update profile error:",r),{data:null,error:r.message}}},h=w(()=>!!u.value);return{user:u,signUp:i,signIn:l,signOut:c,getProfile:g,updateProfile:p,isAuthenticated:h}}export{U as u};
