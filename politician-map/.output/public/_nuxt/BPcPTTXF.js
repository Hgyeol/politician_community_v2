import{_ as $}from"./DA1Fcrqp.js";import{_ as O,r as w,e as S,f as M,o as s,w as b,c as r,g as T,a as t,t as _,d as k,F as L,b as C,T as j,h as B,s as F,i as P,j as I,k as N,l as V,p as A,n as G,u as H}from"./CmVufc-E.js";import{u as D}from"./DviHxHOA.js";import{u as J}from"./DivXWrku.js";import"./DP_pfCD1.js";const R={key:0,class:"panel-container"},z={key:0,class:"panel-content"},q={class:"politician-image"},K=["src","alt"],Q={key:1,class:"no-image"},U={class:"politician-info"},W={class:"info-row"},X={class:"value"},Y={class:"info-row"},Z={class:"value"},tt={class:"info-row"},et={class:"value"},ot={class:"info-row"},nt={class:"value"},st={class:"mt-6"},at={key:1,class:"panel-content"},lt={__name:"PoliticianModal",props:{show:Boolean,politician:Object},emits:["close"],setup(e,{emit:a}){const l=e,i=a,n=w(""),f=["jpg","jpeg","png","JPG","JPEG","PNG","gif","GIF"];S(()=>l.politician,d=>{d&&d.ì˜ì›ëª…&&v(d.ì˜ì›ëª…)},{immediate:!0});async function v(d){n.value="";for(const o of f){const p=`/image/${d}.${o}`;try{if((await fetch(p,{method:"HEAD"})).ok){n.value=p;return}}catch{}}}function g(){n.value=""}function c(){i("close")}return(d,o)=>{const p=$;return s(),M(j,{name:"panel"},{default:b(()=>[e.show?(s(),r("div",R,[t("button",{class:"panel-close",onClick:c},"Ã—"),e.politician?(s(),r("div",z,[t("div",q,[n.value?(s(),r("img",{key:0,src:n.value,alt:e.politician.ì˜ì›ëª…,onError:g},null,40,K)):(s(),r("div",Q," ì‚¬ì§„ ì—†ìŒ "))]),t("div",U,[t("h2",null,_(e.politician.ì˜ì›ëª…),1),t("div",W,[o[0]||(o[0]=t("span",{class:"label"},"ì§€ì—­",-1)),t("span",X,_(e.politician.ì§€ì—­),1)]),t("div",Y,[o[1]||(o[1]=t("span",{class:"label"},"ì •ë‹¹",-1)),t("span",Z,_(e.politician.ì •ë‹¹),1)]),t("div",tt,[o[2]||(o[2]=t("span",{class:"label"},"ì†Œì†ìœ„ì›íšŒ",-1)),t("span",et,_(e.politician.ì†Œì†ìœ„ì›íšŒ),1)]),t("div",ot,[o[3]||(o[3]=t("span",{class:"label"},"ë‹¹ì„ ",-1)),t("span",nt,[k(_(e.politician.ë‹¹ì„ íšŸìˆ˜),1),e.politician.ë‹¹ì„ ë°©ë²•?(s(),r(L,{key:0},[k(" ("+_(e.politician.ë‹¹ì„ ë°©ë²•)+")",1)],64)):T("",!0)])])]),t("div",st,[C(p,{to:`/politicians/${e.politician.id}/suggestions`,class:"block w-full px-6 py-3 bg-gray-800 text-white text-center font-semibold hover:bg-gray-900 transition-all"},{default:b(()=>[...o[4]||(o[4]=[k(" ê±´ì˜ì‚¬í•­ ê²Œì‹œíŒ â†’ ",-1)])]),_:1},8,["to"])])])):(s(),r("div",at,[...o[5]||(o[5]=[t("p",{class:"no-data"},"ì„ íƒí•œ ì§€ì—­ì˜ ì˜ì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",-1)])]))])):T("",!0)]),_:1})}}},it=O(lt,[["__scopeId","data-v-612dedf4"]]),ct=Symbol.for("nuxt:client-only"),dt=B({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:a,attrs:l}){const i=F(!1);P(()=>{i.value=!0});const n=V();return n&&(n._nuxtClientOnly=!0),A(ct,!0),()=>{if(i.value){const c=a.default?.();return c&&c.length===1?[I(c[0],l)]:c}const f=a.fallback||a.placeholder;if(f)return N(f);const v=e.fallback||e.placeholder||"",g=e.fallbackTag||e.placeholderTag||"span";return r(g,l,v)}}}),rt={class:"fixed inset-0 flex flex-col"},ut={class:"bg-white border-b border-gray-200 z-50 flex-shrink-0"},ft={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},pt={class:"flex justify-between items-center h-16"},mt={class:"flex items-center space-x-4"},ht={class:"flex-1 overflow-hidden relative flex items-center justify-center bg-gray-50"},_t=["innerHTML"],wt={__name:"index",setup(e){const a=w(""),l=w(!1),i=w(null),{politicians:n,loadPoliticians:f,findByRegion:v}=D(),{isAuthenticated:g,signOut:c}=J(),d=async()=>{await c()};P(async()=>{try{await f(),console.log("âœ… Politicians loaded:",n.value.length),window.openPoliticianModal=m=>{console.log("ğŸ–±ï¸ openPoliticianModal called with:",m);const h=v(m);console.log("ğŸ‘¤ Found politician:",h),h?(i.value=h,l.value=!0,console.log("âœ… Modal opened for:",h.ì˜ì›ëª…)):(console.log("âŒ No politician found for:",m),console.log("ğŸ“‹ First 5 regions in CSV:",n.value.slice(0,5).map(E=>E.ì§€ì—­)),alert(`"${m}" ì§€ì—­ì˜ ì˜ì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`))};const y=(await(await fetch("/original.html")).text()).match(/<body[^>]*>([\s\S]*)<\/body>/i);y&&(a.value=y[1]),await G(),o()}catch(u){console.error("Failed to load HTML:",u)}});function o(){if(window.d3){const u=new Event("DOMContentLoaded");document.dispatchEvent(u)}}function p(){l.value=!1,i.value=null}return(u,x)=>{const y=$,m=it,h=dt;return s(),M(h,null,{default:b(()=>[t("div",rt,[t("nav",ut,[t("div",ft,[t("div",pt,[C(y,{to:"/",class:"flex items-center space-x-2 group"},{default:b(()=>[...x[0]||(x[0]=[t("div",{class:"text-2xl"},"ğŸ›ï¸",-1),t("span",{class:"text-xl font-bold text-gray-900"}," ì •ì¹˜ì¸ ì»¤ë®¤ë‹ˆí‹° ",-1)])]),_:1}),t("div",mt,[H(g)?(s(),r("button",{key:1,onClick:d,class:"px-4 py-2 text-red-600 hover:bg-red-50 font-medium transition-all"}," ë¡œê·¸ì•„ì›ƒ ")):(s(),M(y,{key:0,to:"/auth/login",class:"px-6 py-2 bg-gray-900 text-white font-semibold hover:bg-gray-800 transition-all"},{default:b(()=>[...x[1]||(x[1]=[k(" ë¡œê·¸ì¸ ",-1)])]),_:1}))])])])]),t("div",ht,[t("div",{innerHTML:a.value,class:"max-w-5xl"},null,8,_t),C(m,{show:l.value,politician:i.value,onClose:p},null,8,["show","politician"])])])]),_:1})}}};export{wt as default};
